(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.MultistreamSelect = factory()}(typeof self !== 'undefined' ? self : this, function () {
var MultistreamSelect=(()=>{var w=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Qe=w((io,Ke)=>{var H=1e3,V=H*60,X=V*60,P=X*24,Wr=P*7,Yr=P*365.25;Ke.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Zr(r);if(t==="number"&&isFinite(r))return e.long?Kr(r):Jr(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Zr(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Yr;case"weeks":case"week":case"w":return t*Wr;case"days":case"day":case"d":return t*P;case"hours":case"hour":case"hrs":case"hr":case"h":return t*X;case"minutes":case"minute":case"mins":case"min":case"m":return t*V;case"seconds":case"second":case"secs":case"sec":case"s":return t*H;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Jr(r){var e=Math.abs(r);return e>=P?Math.round(r/P)+"d":e>=X?Math.round(r/X)+"h":e>=V?Math.round(r/V)+"m":e>=H?Math.round(r/H)+"s":r+"ms"}function Kr(r){var e=Math.abs(r);return e>=P?fe(r,e,P,"day"):e>=X?fe(r,e,X,"hour"):e>=V?fe(r,e,V,"minute"):e>=H?fe(r,e,H,"second"):r+" ms"}function fe(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var tt=w((oo,et)=>{function Qr(r){t.debug=t,t.default=t,t.coerce=a,t.disable=o,t.enable=i,t.enabled=s,t.humanize=Qe(),t.destroy=l,Object.keys(r).forEach(f=>{t[f]=r[f]}),t.names=[],t.skips=[],t.formatters={};function e(f){let h=0;for(let y=0;y<f.length;y++)h=(h<<5)-h+f.charCodeAt(y),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=e;function t(f){let h,y=null;function d(...p){if(!d.enabled)return;let m=d,g=Number(new Date),U=g-(h||g);m.diff=U,m.prev=h,m.curr=g,h=g,p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let F=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(b,S)=>{if(b==="%%")return"%";F++;let C=t.formatters[S];if(typeof C=="function"){let T=p[F];b=C.call(m,T),p.splice(F,1),F--}return b}),t.formatArgs.call(m,p),(m.log||t.log).apply(m,p)}return d.namespace=f,d.useColors=t.useColors(),d.color=t.selectColor(f),d.extend=n,d.destroy=t.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>y===null?t.enabled(f):y,set:p=>{y=p}}),typeof t.init=="function"&&t.init(d),d}function n(f,h){let y=t(this.namespace+(typeof h=="undefined"?":":h)+f);return y.log=this.log,y}function i(f){t.save(f),t.names=[],t.skips=[];let h,y=(typeof f=="string"?f:"").split(/[\s,]+/),d=y.length;for(h=0;h<d;h++)!y[h]||(f=y[h].replace(/\*/g,".*?"),f[0]==="-"?t.skips.push(new RegExp("^"+f.substr(1)+"$")):t.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...t.names.map(c),...t.skips.map(c).map(h=>"-"+h)].join(",");return t.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let h,y;for(h=0,y=t.skips.length;h<y;h++)if(t.skips[h].test(f))return!1;for(h=0,y=t.names.length;h<y;h++)if(t.names[h].test(f))return!0;return!1}function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function a(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}et.exports=Qr});var ae=w((_,he)=>{_.formatArgs=en;_.save=tn;_.load=rn;_.useColors=nn;_.storage=on();_.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();_.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function nn(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function en(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+he.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}_.log=console.debug||console.log||(()=>{});function tn(r){try{r?_.storage.setItem("debug",r):_.storage.removeItem("debug")}catch(e){}}function rn(){let r;try{r=_.storage.getItem("debug")}catch(e){}return!r&&typeof process!="undefined"&&"env"in process&&(r=process.env.DEBUG),r}function on(){try{return localStorage}catch(r){}}he.exports=tt()(_);var{formatters:sn}=he.exports;sn.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var be=w((so,rt)=>{"use strict";function nt(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function un(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return nt(r,t)}catch(n){t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),nt(new i,t)}}rt.exports=un});var ot=w(le=>{"use strict";le.byteLength=cn;le.toByteArray=fn;le.fromByteArray=hn;var N=[],L=[],an=typeof Uint8Array!="undefined"?Uint8Array:Array,Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var W=0,ln=Ce.length;W<ln;++W)N[W]=Ce[W],L[Ce.charCodeAt(W)]=W;L["-".charCodeAt(0)]=62;L["_".charCodeAt(0)]=63;function it(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function cn(r){var e=it(r),t=e[0],n=e[1];return(t+n)*3/4-n}function pn(r,e,t){return(e+t)*3/4-t}function fn(r){var e,t=it(r),n=t[0],i=t[1],o=new an(pn(r,n,i)),s=0,c=i>0?n-4:n,a;for(a=0;a<c;a+=4)e=L[r.charCodeAt(a)]<<18|L[r.charCodeAt(a+1)]<<12|L[r.charCodeAt(a+2)]<<6|L[r.charCodeAt(a+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=L[r.charCodeAt(a)]<<2|L[r.charCodeAt(a+1)]>>4,o[s++]=e&255),i===1&&(e=L[r.charCodeAt(a)]<<10|L[r.charCodeAt(a+1)]<<4|L[r.charCodeAt(a+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function dn(r){return N[r>>18&63]+N[r>>12&63]+N[r>>6&63]+N[r&63]}function wn(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(dn(n));return i.join("")}function hn(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,c=t-n;s<c;s+=o)i.push(wn(r,s,s+o>c?c:s+o));return n===1?(e=r[t-1],i.push(N[e>>2]+N[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(N[e>>10]+N[e>>4&63]+N[e<<2&63]+"=")),i.join("")}});var st=w(Ie=>{Ie.read=function(r,e,t,n,i){var o,s,c=i*8-n-1,a=(1<<c)-1,l=a>>1,f=-7,h=t?i-1:0,y=t?-1:1,d=r[e+h];for(h+=y,o=d&(1<<-f)-1,d>>=-f,f+=c;f>0;o=o*256+r[e+h],h+=y,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=s*256+r[e+h],h+=y,f-=8);if(o===0)o=1-l;else{if(o===a)return s?NaN:(d?-1:1)*Infinity;s=s+Math.pow(2,n),o=o-l}return(d?-1:1)*s*Math.pow(2,o-n)};Ie.write=function(r,e,t,n,i,o){var s,c,a,l=o*8-i-1,f=(1<<l)-1,h=f>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===Infinity?(c=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),s+h>=1?e+=y/a:e+=y*Math.pow(2,1-h),e*a>=2&&(s++,a/=2),s+h>=f?(c=0,s=f):s+h>=1?(c=(e*a-1)*Math.pow(2,i),s=s+h):(c=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+d]=c&255,d+=p,c/=256,i-=8);for(s=s<<i|c,l+=i;l>0;r[t+d]=s&255,d+=p,s/=256,l-=8);r[t+d-p]|=m*128}});var G=w(Y=>{"use strict";var Ae=ot(),Z=st(),ut=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Y.Buffer=u;Y.SlowBuffer=yn;Y.INSPECT_MAX_BYTES=50;var pe=2147483647;Y.kMaxLength=pe;u.TYPED_ARRAY_SUPPORT=gn();!u.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function gn(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch(r){return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}});Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function D(r){if(r>pe)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,u.prototype),e}function u(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _e(r)}return ct(r,e,t)}u.poolSize=8192;function ct(r,e,t){if(typeof r=="string")return xn(r,e);if(ArrayBuffer.isView(r))return mn(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(O(r,ArrayBuffer)||r&&O(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(O(r,SharedArrayBuffer)||r&&O(r.buffer,SharedArrayBuffer)))return Ue(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return u.from(n,e,t);let i=En(r);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return u.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}u.from=function(r,e,t){return ct(r,e,t)};Object.setPrototypeOf(u.prototype,Uint8Array.prototype);Object.setPrototypeOf(u,Uint8Array);function ft(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Bn(r,e,t){return ft(r),r<=0?D(r):e!==void 0?typeof t=="string"?D(r).fill(e,t):D(r).fill(e):D(r)}u.alloc=function(r,e,t){return Bn(r,e,t)};function _e(r){return ft(r),D(r<0?0:Le(r)|0)}u.allocUnsafe=function(r){return _e(r)};u.allocUnsafeSlow=function(r){return _e(r)};function xn(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=ht(r,e)|0,n=D(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Te(r){let e=r.length<0?0:Le(r.length)|0,t=D(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function mn(r){if(O(r,Uint8Array)){let e=new Uint8Array(r);return Ue(e.buffer,e.byteOffset,e.byteLength)}return Te(r)}function Ue(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,u.prototype),n}function En(r){if(u.isBuffer(r)){let e=Le(r.length)|0,t=D(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Re(r.length)?D(0):Te(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Te(r.data)}function Le(r){if(r>=pe)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+pe.toString(16)+" bytes");return r|0}function yn(r){return+r!=r&&(r=0),u.alloc(+r)}u.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==u.prototype};u.compare=function(e,t){if(O(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),O(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return u.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=u.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(O(s,Uint8Array))o+s.length>i.length?(u.isBuffer(s)||(s=u.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(u.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function ht(r,e){if(u.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||O(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Se(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return at(r).length;default:if(i)return n?-1:Se(r).length;e=(""+e).toLowerCase(),i=!0}}u.byteLength=ht;function _n(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return In(this,e,t);case"utf8":case"utf-8":return lt(this,e,t);case"ascii":return bn(this,e,t);case"latin1":case"binary":return Cn(this,e,t);case"base64":return Fn(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return An(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}u.prototype._isBuffer=!0;function v(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}u.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this};u.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this};u.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this};u.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?lt(this,0,e):_n.apply(this,arguments)};u.prototype.toLocaleString=u.prototype.toString;u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:u.compare(this,e)===0};u.prototype.inspect=function(){let e="",t=Y.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};ut&&(u.prototype[ut]=u.prototype.inspect);u.prototype.compare=function(e,t,n,i,o){if(O(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,c=n-t,a=Math.min(s,c),l=this.slice(i,o),f=e.slice(t,n);for(let h=0;h<a;++h)if(l[h]!==f[h]){s=l[h],c=f[h];break}return s<c?-1:c<s?1:0};function dt(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Re(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=u.from(e,n)),u.isBuffer(e))return e.length===0?-1:pt(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):pt(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function pt(r,e,t,n,i){let o=1,s=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,c/=2,t/=2}function a(f,h){return o===1?f[h]:f.readUInt16BE(h*o)}let l;if(i){let f=-1;for(l=t;l<s;l++)if(a(r,l)===a(e,f===-1?0:l-f)){if(f===-1&&(f=l),l-f+1===c)return f*o}else f!==-1&&(l-=l-f),f=-1}else for(t+c>s&&(t=s-c),l=t;l>=0;l--){let f=!0;for(let h=0;h<c;h++)if(a(r,l+h)!==a(e,h)){f=!1;break}if(f)return l}return-1}u.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};u.prototype.indexOf=function(e,t,n){return dt(this,e,t,n,!0)};u.prototype.lastIndexOf=function(e,t,n){return dt(this,e,t,n,!1)};function Un(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let c=parseInt(e.substr(s*2,2),16);if(Re(c))return s;r[t+s]=c}return s}function Ln(r,e,t,n){return de(Se(e,r.length-t),r,t,n)}function Rn(r,e,t,n){return de(Tn(e),r,t,n)}function Sn(r,e,t,n){return de(at(e),r,t,n)}function On(r,e,t,n){return de(Nn(e,r.length-t),r,t,n)}u.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return Un(this,e,t,n);case"utf8":case"utf-8":return Ln(this,e,t,n);case"ascii":case"latin1":case"binary":return Rn(this,e,t,n);case"base64":return Sn(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return On(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Fn(r,e,t){return e===0&&t===r.length?Ae.fromByteArray(r):Ae.fromByteArray(r.slice(e,t))}function lt(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){let a,l,f,h;switch(c){case 1:o<128&&(s=o);break;case 2:a=r[i+1],(a&192)==128&&(h=(o&31)<<6|a&63,h>127&&(s=h));break;case 3:a=r[i+1],l=r[i+2],(a&192)==128&&(l&192)==128&&(h=(o&15)<<12|(a&63)<<6|l&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:a=r[i+1],l=r[i+2],f=r[i+3],(a&192)==128&&(l&192)==128&&(f&192)==128&&(h=(o&15)<<18|(a&63)<<12|(l&63)<<6|f&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,c=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=c}return Dn(n)}var wt=4096;function Dn(r){let e=r.length;if(e<=wt)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=wt));return t}function bn(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function Cn(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function In(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=kn[r[o]];return i}function An(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}u.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,u.prototype),i};function E(r,e,t){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||E(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||E(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e=e>>>0,t||E(e,1,this.length),this[e]};u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||E(e,2,this.length),this[e]|this[e+1]<<8};u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||E(e,2,this.length),this[e]<<8|this[e+1]};u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||E(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};u.prototype.readBigUInt64LE=M(function(e){e=e>>>0,J(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&oe(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});u.prototype.readBigUInt64BE=M(function(e){e=e>>>0,J(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&oe(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});u.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||E(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};u.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||E(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};u.prototype.readInt8=function(e,t){return e=e>>>0,t||E(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};u.prototype.readInt16LE=function(e,t){e=e>>>0,t||E(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};u.prototype.readInt16BE=function(e,t){e=e>>>0,t||E(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};u.prototype.readInt32LE=function(e,t){return e=e>>>0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};u.prototype.readInt32BE=function(e,t){return e=e>>>0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};u.prototype.readBigInt64LE=M(function(e){e=e>>>0,J(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&oe(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});u.prototype.readBigInt64BE=M(function(e){e=e>>>0,J(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&oe(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});u.prototype.readFloatLE=function(e,t){return e=e>>>0,t||E(e,4,this.length),Z.read(this,e,!0,23,4)};u.prototype.readFloatBE=function(e,t){return e=e>>>0,t||E(e,4,this.length),Z.read(this,e,!1,23,4)};u.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||E(e,8,this.length),Z.read(this,e,!0,52,8)};u.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||E(e,8,this.length),Z.read(this,e,!1,52,8)};function I(r,e,t,n,i,o){if(!u.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;I(this,e,t,n,c,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;I(this,e,t,n,c,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||I(this,e,t,1,255,0),this[t]=e&255,t+1};u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||I(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function gt(r,e,t,n,i){yt(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function xt(r,e,t,n,i){yt(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}u.prototype.writeBigUInt64LE=M(function(e,t=0){return gt(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});u.prototype.writeBigUInt64BE=M(function(e,t=0){return xt(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});u.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let a=Math.pow(2,8*n-1);I(this,e,t,n,a-1,-a)}let o=0,s=1,c=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/s>>0)-c&255;return t+n};u.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let a=Math.pow(2,8*n-1);I(this,e,t,n,a-1,-a)}let o=n-1,s=1,c=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/s>>0)-c&255;return t+n};u.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};u.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||I(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};u.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};u.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||I(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};u.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};u.prototype.writeBigInt64LE=M(function(e,t=0){return gt(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});u.prototype.writeBigInt64BE=M(function(e,t=0){return xt(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function mt(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Et(r,e,t,n,i){return e=+e,t=t>>>0,i||mt(r,e,t,4,34028234663852886e22,-34028234663852886e22),Z.write(r,e,t,n,23,4),t+4}u.prototype.writeFloatLE=function(e,t,n){return Et(this,e,t,!0,n)};u.prototype.writeFloatBE=function(e,t,n){return Et(this,e,t,!1,n)};function Bt(r,e,t,n,i){return e=+e,t=t>>>0,i||mt(r,e,t,8,17976931348623157e292,-17976931348623157e292),Z.write(r,e,t,n,52,8),t+8}u.prototype.writeDoubleLE=function(e,t,n){return Bt(this,e,t,!0,n)};u.prototype.writeDoubleBE=function(e,t,n){return Bt(this,e,t,!1,n)};u.prototype.copy=function(e,t,n,i){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};u.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=u.isBuffer(e)?e:u.from(e,i),c=s.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%c]}return this};var K={};function Ne(r,e,t){K[r]=class extends t{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Ne("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Ne("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Ne("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=Ft(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=Ft(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Ft(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Mn(r,e,t){J(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&oe(e,r.length-(t+1))}function yt(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:c=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:c=`>= ${e}${s} and <= ${t}${s}`,new K.ERR_OUT_OF_RANGE("value",c,r)}Mn(n,i,o)}function J(r,e){if(typeof r!="number")throw new K.ERR_INVALID_ARG_TYPE(e,"number",r)}function oe(r,e,t){throw Math.floor(r)!==r?(J(r,t),new K.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new K.ERR_BUFFER_OUT_OF_BOUNDS:new K.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var qn=/[^+/0-9A-Za-z-_]/g;function Pn(r){if(r=r.split("=")[0],r=r.trim().replace(qn,""),r.length<2)return"";for(;r.length%4!=0;)r=r+"=";return r}function Se(r,e){e=e||Infinity;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function Tn(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Nn(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function at(r){return Ae.toByteArray(Pn(r))}function de(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function O(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Re(r){return r!==r}var kn=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function M(r){return typeof BigInt=="undefined"?vn:r}function vn(){throw new Error("BigInt not supported")}});var Q=w((ao,bt)=>{"use strict";var{Buffer:R}=G(),Ct=Symbol.for("BufferList");function x(r){if(!(this instanceof x))return new x(r);x._init.call(this,r)}x._init=function(e){Object.defineProperty(this,Ct,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};x.prototype._new=function(e){return new x(e)};x.prototype._offset=function(e){if(e===0)return[0,0];let t=0;for(let n=0;n<this._bufs.length;n++){let i=t+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-t];t=i}};x.prototype._reverseOffset=function(r){let e=r[0],t=r[1];for(let n=0;n<e;n++)t+=this._bufs[n].length;return t};x.prototype.get=function(e){if(e>this.length||e<0)return;let t=this._offset(e);return this._bufs[t[0]][t[1]]};x.prototype.slice=function(e,t){return typeof e=="number"&&e<0&&(e+=this.length),typeof t=="number"&&t<0&&(t+=this.length),this.copy(null,0,e,t)};x.prototype.copy=function(e,t,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||R.alloc(0);let o=!!e,s=this._offset(n),c=i-n,a=c,l=o&&t||0,f=s[1];if(n===0&&i===this.length){if(!o)return this._bufs.length===1?this._bufs[0]:R.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,l),l+=this._bufs[h].length;return e}if(a<=this._bufs[s[0]].length-f)return o?this._bufs[s[0]].copy(e,t,f,f+a):this._bufs[s[0]].slice(f,f+a);o||(e=R.allocUnsafe(c));for(let h=s[0];h<this._bufs.length;h++){let y=this._bufs[h].length-f;if(a>y)this._bufs[h].copy(e,l,f),l+=y;else{this._bufs[h].copy(e,l,f,f+a),l+=y;break}a-=y,f&&(f=0)}return e.length>l?e.slice(0,l):e};x.prototype.shallowSlice=function(e,t){if(e=e||0,t=typeof t!="number"?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();let n=this._offset(e),i=this._offset(t),o=this._bufs.slice(n[0],i[0]+1);return i[1]===0?o.pop():o[o.length-1]=o[o.length-1].slice(0,i[1]),n[1]!==0&&(o[0]=o[0].slice(n[1])),this._new(o)};x.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)};x.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};x.prototype.duplicate=function(){let e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e};x.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(R.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(R.from(e));return this};x.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};x.prototype.indexOf=function(r,e,t){if(t===void 0&&typeof e=="string"&&(t=e,e=void 0),typeof r=="function"||Array.isArray(r))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof r=="number"?r=R.from([r]):typeof r=="string"?r=R.from(r,t):this._isBufferList(r)?r=r.slice():Array.isArray(r.buffer)?r=R.from(r.buffer,r.byteOffset,r.byteLength):R.isBuffer(r)||(r=R.from(r)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),r.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],o=n[1];for(;i<this._bufs.length;i++){let s=this._bufs[i];for(;o<s.length;)if(s.length-o>=r.length){let a=s.indexOf(r,o);if(a!==-1)return this._reverseOffset([i,a]);o=s.length-r.length+1}else{let a=this._reverseOffset([i,o]);if(this._match(a,r))return a;o++}o=0}return-1};x.prototype._match=function(r,e){if(this.length-r<e.length)return!1;for(let t=0;t<e.length;t++)if(this.get(r+t)!==e[t])return!1;return!0};(function(){let r={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in r)(function(t){r[t]===null?x.prototype[t]=function(n,i){return this.slice(n,n+i)[t](0,i)}:x.prototype[t]=function(n=0){return this.slice(n,n+r[t])[t](0)}})(e)})();x.prototype._isBufferList=function(e){return e instanceof x||x.isBufferList(e)};x.isBufferList=function(e){return e!=null&&e[Ct]};bt.exports=x});var _t=w((lo,It)=>{It.exports=Oe;var At=128,Gn=127,jn=~Gn,$n=Math.pow(2,31);function Oe(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw Oe.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=$n;)e[t++]=r&255|At,r/=128;for(;r&jn;)e[t++]=r&255|At,r>>>=7;return e[t]=r|0,Oe.bytes=t-n+1,e}});var Tt=w((po,Ut)=>{Ut.exports=De;var zn=128,Lt=127;function De(r,e){var t=0,e=e||0,n=0,i=e,o,s=r.length;do{if(i>=s||n>49)throw De.bytes=0,new RangeError("Could not decode varint");o=r[i++],t+=n<28?(o&Lt)<<n:(o&Lt)*Math.pow(2,n),n+=7}while(o>=zn);return De.bytes=i-e,t}});var St=w((wo,Rt)=>{var Hn=Math.pow(2,7),Vn=Math.pow(2,14),Xn=Math.pow(2,21),Wn=Math.pow(2,28),Yn=Math.pow(2,35),Zn=Math.pow(2,42),Jn=Math.pow(2,49),Kn=Math.pow(2,56),Qn=Math.pow(2,63);Rt.exports=function(r){return r<Hn?1:r<Vn?2:r<Xn?3:r<Wn?4:r<Yn?5:r<Zn?6:r<Jn?7:r<Kn?8:r<Qn?9:10}});var ke=w((yo,Nt)=>{Nt.exports={encode:_t(),decode:Tt(),encodingLength:St()}});var Me=w((go,Ot)=>{"use strict";var Dt=ke(),{Buffer:ei}=G(),kt=(r,e,t)=>{let n=Dt.encode(r,e,t);return kt.bytes=Dt.encode.bytes,e||ei.from(n)};Ot.exports=kt});var jt=w((xo,we)=>{"use strict";var{Buffer:Mt}=G(),qt=Q(),Pt=Me(),qe=8,vt=10*1024;function Gt(r){r=r||{};let e=Math.max(r.poolSize||vt,r.minPoolSize||qe),t=r.lengthEncoder||Pt;return async function*(i){let o=Mt.alloc(e),s=0;for await(let c of i){t(c.length,o,s);let a=o.slice(s,s+t.bytes);s+=t.bytes,o.length-s<qe&&(o=Mt.alloc(e),s=0),yield new qt().append(a).append(c)}}}Gt.single=(r,e)=>{e=e||{};let t=e.lengthEncoder||Pt;return new qt([t(r.length),r.slice()])};we.exports=Gt;we.exports.MIN_POOL_SIZE=qe;we.exports.DEFAULT_POOL_SIZE=vt});var Pe=w((mo,$t)=>{"use strict";var zt=ke(),{Buffer:ti}=G(),ri=r=>new Proxy({},{get:(e,t)=>t[0]==="l"?r[t]:r.get(parseInt(t))}),Ht=r=>{let e=zt.decode(ti.isBuffer(r)?r:ri(r));return Ht.bytes=zt.decode.bytes,e};$t.exports=Ht});var Yt=w((Eo,ye)=>{"use strict";var{Buffer:ni}=G(),ve=Q(),ii=Pe(),Vt=8,Xt=1024*1024*4,Wt=ni.alloc(0),q={LENGTH:"readLength",DATA:"readData"},oi={[q.LENGTH]:(r,e,t,n)=>{e=e.append(r);let i;try{i=n.lengthDecoder(e)}catch(o){if(e.length>n.maxLengthLength)throw Object.assign(o,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(o instanceof RangeError)return{mode:q.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw o}if(i>n.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return r=e.shallowSlice(n.lengthDecoder.bytes),e=new ve,n.onLength&&n.onLength(i),i<=0?(n.onData&&n.onData(Wt),{mode:q.LENGTH,chunk:r,buffer:e,data:Wt}):{mode:q.DATA,chunk:r,buffer:e,state:{dataLength:i},data:void 0}},[q.DATA]:(r,e,t,n)=>{if(e=e.append(r),!t)throw new Error("state is required");if(e.length<t.dataLength)return{mode:q.DATA,buffer:e,state:t,chunk:void 0,data:void 0};let{dataLength:i}=t,o=e.shallowSlice(0,i),s=e.length>i?e.shallowSlice(i):void 0;return e=new ve,n.onData&&n.onData(o),{mode:q.LENGTH,chunk:s,buffer:e,state:void 0,data:o}}};function Ge(r){r=r||{};let e={lengthDecoder:r.lengthDecoder||ii,maxLengthLength:r.maxLengthLength||Vt,maxDataLength:r.maxDataLength||Xt,onLength:r.onLength,onData:r.onData};return async function*(n){let i=new ve,o=q.LENGTH,s;for await(let c of n){let a=c;for(;a;){let l=oi[o](a,i,s,e);o=l.mode,a=l.chunk,i=l.buffer,s=l.state,l.data&&(yield l.data)}}if(i.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}Ge.fromReader=(r,e)=>{let t=1,n={[Symbol.asyncIterator](){return this},next:async()=>{try{return await r.next(t)}catch(o){if(o.code==="ERR_UNDER_READ")return{done:!0,value:null};throw o}finally{t=1}}};return Ge({...e||{},onLength:o=>{t=o}})(n)};ye.exports=Ge;ye.exports.MAX_LENGTH_LENGTH=Vt;ye.exports.MAX_DATA_LENGTH=Xt});var Kt=w((Bo,Zt)=>{"use strict";var{Buffer:si}=G(),Jt=(r,e,t)=>(e=e||si.allocUnsafe(4),e.writeInt32BE(r,t),e);Jt.bytes=4;Zt.exports=Jt});var tr=w((Fo,Qt)=>{"use strict";var er=r=>{if(r.length<4)throw RangeError("Could not decode int32BE");return r.readInt32BE(0)};er.bytes=4;Qt.exports=er});var je=w(j=>{"use strict";j.encode=jt();j.decode=Yt();j.varintEncode=Me();j.varintDecode=Pe();j.int32BEEncode=Kt();j.int32BEDecode=tr()});var ze=w((Co,ee)=>{var rr=(...r)=>{let e;for(;r.length;)e=r.shift()(e);return e},$e=r=>r&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),ge=r=>r&&typeof r.sink=="function"&&$e(r.source),ui=r=>e=>(r.sink(e),r.source),nr=(...r)=>{if(ge(r[0])){let e=r[0];r[0]=()=>e.source}else if($e(r[0])){let e=r[0];r[0]=()=>e}if(r.length>1&&ge(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let e=1;e<r.length-1;e++)ge(r[e])&&(r[e]=ui(r[e]));return rr(...r)};ee.exports=nr;ee.exports.pipe=nr;ee.exports.rawPipe=rr;ee.exports.isIterable=$e;ee.exports.isDuplex=ge});var or=w((Io,ir)=>{"use strict";function ci(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=n}var s=r.length,c=r.charAt(0),a=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var p=0,m=0,g=0,U=d.length;g!==U&&d[g]===0;)g++,p++;for(var F=(U-g)*l+1>>>0,A=new Uint8Array(F);g!==U;){for(var b=d[g],S=0,C=F-1;(b!==0||S<m)&&C!==-1;C--,S++)b+=256*A[C]>>>0,A[C]=b%s>>>0,b=b/s>>>0;if(b!==0)throw new Error("Non-zero carry");m=S,g++}for(var T=F-m;T!==F&&A[T]===0;)T++;for(var ce=c.repeat(p);T<F;++T)ce+=r.charAt(A[T]);return ce}function h(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var p=0;if(d[p]!==" "){for(var m=0,g=0;d[p]===c;)m++,p++;for(var U=(d.length-p)*a+1>>>0,F=new Uint8Array(U);d[p];){var A=e[d.charCodeAt(p)];if(A===255)return;for(var b=0,S=U-1;(A!==0||b<g)&&S!==-1;S--,b++)A+=s*F[S]>>>0,F[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");g=b,p++}if(d[p]!==" "){for(var C=U-g;C!==U&&F[C]===0;)C++;for(var T=new Uint8Array(m+(U-C)),ce=m;C!==U;)T[ce++]=F[C++];return T}}}function y(d){var p=h(d);if(p)return p;throw new Error("Non-base"+s+" character")}return{encode:f,decodeUnsafe:h,decode:y}}ir.exports=ci});var xe=w((Ao,sr)=>{"use strict";var fi=new TextDecoder,hi=r=>fi.decode(r),ai=new TextEncoder,li=r=>ai.encode(r);function pi(r,e){let t=new Uint8Array(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}sr.exports={decodeText:hi,encodeText:li,concat:pi}});var fr=w((_o,ur)=>{"use strict";var{encodeText:di}=xe(),cr=class{constructor(e,t,n,i){this.name=e,this.code=t,this.codeBuf=di(this.code),this.alphabet=i,this.codec=n(i)}encode(e){return this.codec.encode(e)}decode(e){for(let t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}};ur.exports=cr});var ar=w((Uo,hr)=>{"use strict";var wi=(r,e,t)=>{let n={};for(let l=0;l<e.length;++l)n[e[l]]=l;let i=r.length;for(;r[i-1]==="=";)--i;let o=new Uint8Array(i*t/8|0),s=0,c=0,a=0;for(let l=0;l<i;++l){let f=n[r[l]];if(f===void 0)throw new SyntaxError("Invalid character "+r[l]);c=c<<t|f,s+=t,s>=8&&(s-=8,o[a++]=255&c>>s)}if(s>=t||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return o},yi=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,c=0;for(let a=0;a<r.length;++a)for(c=c<<8|r[a],s+=8;s>t;)s-=t,o+=e[i&c>>s];if(s&&(o+=e[i&c<<t-s]),n)for(;o.length*t&7;)o+="=";return o},gi=r=>e=>({encode(t){return yi(t,e,r)},decode(t){return wi(t,e,r)}});hr.exports={rfc4648:gi}});var wr=w((Lo,lr)=>{"use strict";var se=or(),xi=fr(),{rfc4648:B}=ar(),{decodeText:mi,encodeText:Ei}=xe(),Bi=()=>({encode:mi,decode:Ei}),pr=[["identity","\0",Bi,""],["base2","0",B(1),"01"],["base8","7",B(3),"01234567"],["base10","9",se,"0123456789"],["base16","f",B(4),"0123456789abcdef"],["base16upper","F",B(4),"0123456789ABCDEF"],["base32hex","v",B(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",B(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",B(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",B(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",B(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",B(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",B(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",B(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",B(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",se,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",se,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",se,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",se,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",B(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",B(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",B(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",B(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],dr=pr.reduce((r,e)=>(r[e[0]]=new xi(e[0],e[1],e[2],e[3]),r),{}),Fi=pr.reduce((r,e)=>(r[e[1]]=dr[e[0]],r),{});lr.exports={names:dr,codes:Fi}});var xr=w((k,yr)=>{"use strict";var te=wr(),{encodeText:bi,decodeText:me,concat:gr}=xe();function Ii(r,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:t,codeBuf:n}=$(r);return Ci(t,e),gr([n,e],n.length+e.length)}function Ai(r,e){let t=$(r),n=bi(t.encode(e));return gr([t.codeBuf,n],t.codeBuf.length+n.length)}function _i(r){r instanceof Uint8Array&&(r=me(r));let e=r[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(r=r.toLowerCase()),$(r[0]).decode(r.substring(1))}function Ui(r){if(r instanceof Uint8Array&&(r=me(r)),Object.prototype.toString.call(r)!=="[object String]")return!1;try{return $(r[0]).name}catch(e){return!1}}function Ci(r,e){$(r).decode(me(e))}function $(r){if(Object.prototype.hasOwnProperty.call(te.names,r))return te.names[r];if(Object.prototype.hasOwnProperty.call(te.codes,r))return te.codes[r];throw new Error(`Unsupported encoding: ${r}`)}function Li(r){return r instanceof Uint8Array&&(r=me(r)),$(r[0])}k=yr.exports=Ii;k.encode=Ai;k.decode=_i;k.isEncoded=Ui;k.encoding=$;k.encodingFromData=Li;var Ti=Object.freeze(te.names),Ri=Object.freeze(te.codes);k.names=Ti;k.codes=Ri});var Er=w((To,mr)=>{"use strict";var{encoding:Si}=xr(),Ni=new TextEncoder;function Oi(r){let e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}function Di(r,e="utf8"){return e==="utf8"||e==="utf-8"?Ni.encode(r):e==="ascii"?Oi(r):Si(e).decode(r)}mr.exports=Di});var Fr=w((Ro,Br)=>{"use strict";var ki=async r=>{for await(let e of r)return e};Br.exports=ki});var Ee=w(z=>{"use strict";var br=Q(),Cr=je(),Mi=ze(),qi=be(),Pi=Er(),vi=Fr(),Ir=Pi(`
`);z.encode=r=>Cr.encode.single(new br([r,Ir]));z.write=(r,e)=>r.push(z.encode(e));z.writeAll=(r,e)=>{r.push(e.reduce((t,n)=>t.append(z.encode(n)),new br))};z.read=async r=>{let e=1,t={[Symbol.asyncIterator](){return this},next:()=>r.next(e)},n=o=>{e=o},i=await Mi(t,Cr.decode({onLength:n}),vi);if(i.get(i.length-1)!==Ir[0])throw qi(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return i.shallowSlice(0,-1)}});var Ve=w((No,Ar)=>{var He=Q();Ar.exports=r=>{let e=async function*(){let t=yield,n=new He;for await(let i of r){if(!t){t=yield n.append(i),n=new He;continue}for(n.append(i);n.length>=t;){let o=n.shallowSlice(0,t);if(n.consume(t),t=yield o,!t){n.length&&(t=yield n,n=new He);break}}}if(t)throw Object.assign(new Error(`stream ended before ${t} bytes became available`),{code:"ERR_UNDER_READ",buffer:n})}();return e.next(),e}});var Ur=w((Do,_r)=>{_r.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var Rr=w((Mo,Lr)=>{var Tr=Ur();Lr.exports=class{constructor(e){this.hwm=e||16,this.head=new Tr(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let t=this.head;this.head=t.next=new Tr(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var Nr=w((qo,Sr)=>{var Xe=Rr();Sr.exports=r=>{r=r||{};let e;typeof r=="function"?(e=r,r={}):e=r.onEnd;let t=new Xe,n,i,o,s=()=>{if(!t.isEmpty()){if(r.writev){let m,g=[];for(;!t.isEmpty();){if(m=t.shift(),m.error)throw m.error;g.push(m.value)}return{done:m.done,value:g}}let p=t.shift();if(p.error)throw p.error;return p}return o?{done:!0}:new Promise((p,m)=>{i=g=>(i=null,g.error?m(g.error):r.writev&&!g.done?p({done:g.done,value:[g.value]}):p(g),n)})},c=p=>i?i(p):(t.push(p),n),a=p=>(t=new Xe,i?i({error:p}):(t.push({error:p}),n)),l=p=>o?n:c({done:!1,value:p}),f=p=>o?n:(o=!0,p?a(p):c({done:!0})),h=()=>(t=new Xe,f(),{done:!0}),y=p=>(f(p),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:s,return:h,throw:y,push:l,end:f},!e)return n;let d=n;return n={[Symbol.asyncIterator](){return this},next(){return d.next()},throw(p){return d.throw(p),e&&(e(p),e=null),{done:!0}},return(){return d.return(),e&&(e(),e=null),{done:!0}},push:l,end(p){return d.end(p),e&&(e(p),e=null),n}},n}});var Dr=w((Po,Or)=>{"use strict";var Gi=()=>{let r={};return r.promise=new Promise((e,t)=>{r.resolve=e,r.reject=t}),r};Or.exports=Gi});var Be=w((vo,kr)=>{"use strict";var ji=Ve(),$i=Nr(),zi=Dr();kr.exports=r=>{let e=$i(),t=ji(r.source),n=zi(),i,o=r.sink(async function*(){yield*e,yield*await n.promise}());return o.catch(c=>{i=c}),{reader:t,writer:e,stream:{sink:c=>i?Promise.reject(i):(n.resolve(c),o),source:t},rest:()=>e.end(),write:e.push,read:async()=>(await t.next()).value}}});var qr=w((Go,Mr)=>{"use strict";var re=ae()("mss:select"),Hi=be(),ne=Ee(),Vi=Be();Mr.exports=async(r,e,t)=>{e=Array.isArray(e)?[...e]:[e];let{reader:n,writer:i,rest:o,stream:s}=Vi(r),c=e.shift();t?(re('select: write ["%s", "%s"]',t,c),ne.writeAll(i,[t,c])):(re('select: write "%s"',c),ne.write(i,c));let a=(await ne.read(n)).toString();if(re('select: read "%s"',a),a===t&&(a=(await ne.read(n)).toString(),re('select: read "%s"',a)),a===c)return o(),{stream:s,protocol:c};for(let l of e){re('select: write "%s"',l),ne.write(i,l);let f=(await ne.read(n)).toString();if(re('select: read "%s" for "%s"',f,l),f===l)return o(),{stream:s,protocol:l}}throw o(),Hi(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}});var We=w(Pr=>{"use strict";Pr.PROTOCOL_ID="/multistream/1.0.0"});var Gr=w(($o,vr)=>{"use strict";var ue=ae()("mss:handle"),Xi=Q(),ie=Ee(),Wi=Be(),{PROTOCOL_ID:Ye}=We();vr.exports=async(r,e)=>{e=Array.isArray(e)?e:[e];let{writer:t,reader:n,rest:i,stream:o}=Wi(r);for(;;){let s=(await ie.read(n)).toString();if(ue('read "%s"',s),s===Ye){ue('respond with "%s" for "%s"',Ye,s),ie.write(t,Ye);continue}if(e.includes(s))return ie.write(t,s),ue('respond with "%s" for "%s"',s,s),i(),{stream:o,protocol:s};if(s==="ls"){ie.write(t,new Xi(e.map(c=>ie.encode(c)))),ue('respond with "%s" for %s',e,s);continue}ie.write(t,"na"),ue('respond with "na" for "%s"',s)}}});var zr=w((zo,jr)=>{"use strict";var Yi=Ve(),Zi=ae()("it-multistream-select:ls"),$r=Ee(),Ji=Be(),Ki=je(),Qi=ze();jr.exports=async r=>{let{reader:e,writer:t,rest:n,stream:i}=Ji(r);Zi('write "ls"'),$r.write(t,"ls"),n();let o=await $r.read(e),s=Yi([o]),c=[];return await Qi(s,Ki.decode(),async a=>{for await(let l of a)c.push(l.shallowSlice(0,-1).toString())}),{stream:i,protocols:c}}});var ro=w(Fe=>{"use strict";var Hr=qr(),eo=Gr(),to=zr(),{PROTOCOL_ID:Ze}=We();Fe.PROTOCOL_ID=Ze;var Je=class{constructor(e){this._stream=e,this._shaken=!1}async _handshake(){if(this._shaken)return;let{stream:e}=await Hr(this._stream,Ze);this._stream=e,this._shaken=!0}},Vr=class extends Je{select(e){return Hr(this._stream,e,this._shaken?null:Ze)}async ls(){await this._handshake();let{stream:e,protocols:t}=await to(this._stream);return this._stream=e,t}};Fe.Dialer=Vr;var Xr=class extends Je{handle(e){return eo(this._stream,e)}};Fe.Listener=Xr});return ro();})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
return MultistreamSelect}));
